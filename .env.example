# Blockchain Configuration
CDP_API_KEY=your_coinbase_cdp_api_key_here
CDP_API_SECRET=your_coinbase_cdp_secret_here
CDP_WALLET_SECRET=your_cdp_wallet_secret_here
# CDP_WALLET_ID is optional - used for persistent wallet across runs
# Get this by running scripts/import_cdp_wallet.py after funding a wallet
CDP_WALLET_ID=
# WALLET_SEED must be a valid BIP39 seed phrase (12 or 24 words)
# Generate testnet seed: python -c "from bip_utils import Bip39MnemonicGenerator; print(Bip39MnemonicGenerator().FromWordsNumber(12))"
# NEVER use online generators for real funds! NEVER commit this value!
WALLET_SEED=your_wallet_seed_phrase_here
BASE_RPC_URL=https://sepolia.base.org

# AI Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Security Limits (USD values)
MAX_TRANSACTION_VALUE_USD=1000
DAILY_SPENDING_LIMIT_USD=5000
APPROVAL_THRESHOLD_USD=100
X402_DAILY_BUDGET_USD=50
MAX_GAS_PRICE_GWEI=100

# Environment
ENVIRONMENT=development  # development, staging, production
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# Database
DATABASE_URL=sqlite:///mammon.db

# Monitoring (Optional)
ALERT_WEBHOOK=
SENTRY_DSN=

# Safety Features
DRY_RUN_MODE=true  # Enable dry-run mode (simulates transactions, no real execution)

# Chainlink Oracle Configuration
CHAINLINK_ENABLED=true  # Use Chainlink oracles for real price data
CHAINLINK_PRICE_NETWORK=base-mainnet  # Network to query prices from (base-mainnet recommended)
CHAINLINK_CACHE_TTL_SECONDS=300  # Cache TTL in seconds (5 minutes)
CHAINLINK_MAX_STALENESS_SECONDS=3600  # Maximum acceptable price age (1 hour)
CHAINLINK_FALLBACK_TO_MOCK=true  # Fallback to mock oracle if Chainlink unavailable
CHAINLINK_STRICT_STALENESS=false  # Raise exception on stale prices (recommended for production swaps)
BASE_MAINNET_RPC_URL=https://mainnet.base.org  # Base Mainnet RPC for price queries (read-only)

# Gas Estimation Configuration (Sprint 4 Priority 3 - Phase 2)
GAS_ESTIMATE_MODE=direct  # "direct" (fast) or "simulation" (accurate with eth_call)
GAS_CACHE_TTL_SECONDS=300  # Cache TTL for gas estimates (5 minutes)
MAX_GAS_PRICE_GWEI=100  # Maximum acceptable gas price in gwei (reject if exceeded)

# Swap Configuration (Sprint 4 Priority 3 - Phase 3)
DEFAULT_SLIPPAGE_BPS=50  # Default slippage tolerance (50 = 0.5%)
MAX_PRICE_DEVIATION_PERCENT=2.0  # Maximum DEX/oracle price deviation (2.0 = 2%)
SWAP_DEADLINE_SECONDS=600  # Transaction deadline (600 = 10 minutes)
DEFAULT_FEE_TIER=3000  # Default Uniswap V3 fee tier (3000 = 0.3%)

# ============================================================================
# SPRINT 4 PRIORITY 2: Premium RPC Configuration
# ============================================================================
# Premium RPC providers improve reliability, reduce latency, and provide better rate limits.
# All premium settings are OPTIONAL - falls back to public RPCs if not configured.

# Alchemy Configuration (Primary Premium RPC)
# Sign up: https://www.alchemy.com/ (Free tier: 300M compute units/month)
# Recommended: $5/month pay-as-you-go plan for production
ALCHEMY_API_KEY=  # Your Alchemy API key

# QuickNode Configuration (Backup Premium RPC)
# Sign up: https://www.quicknode.com/ (Free tier: 10M API credits/month)
QUICKNODE_ENDPOINT=  # Your QuickNode endpoint URL (e.g., https://xxx.quiknode.pro/yyy/)

# RPC Rate Limits (requests per second)
# Adjust based on your provider's plan
ALCHEMY_RATE_LIMIT_PER_SECOND=100  # Alchemy free tier: 100 RPS
QUICKNODE_RATE_LIMIT_PER_SECOND=25  # QuickNode free tier: 25 RPS
PUBLIC_RATE_LIMIT_PER_SECOND=10  # Conservative limit for public RPCs

# Circuit Breaker Settings
# Prevents hammering failed endpoints
RPC_FAILURE_THRESHOLD=3  # Failures before circuit opens
RPC_RECOVERY_TIMEOUT=60  # Seconds before retry

# Gradual Rollout (for safe production deployment)
# Start at 10%, increase gradually to 100%
PREMIUM_RPC_ENABLED=false  # Set to true to enable premium RPC
PREMIUM_RPC_PERCENTAGE=10  # Percentage of requests to route to premium (0-100)

# RPC Health Monitoring
RPC_HEALTH_CHECK_INTERVAL=60  # Health check interval in seconds

# ============================================================================
# PHASE 3: Profitability Gate Configuration
# ============================================================================
# These settings control when the optimizer will recommend rebalancing moves.
# All moves must pass BOTH profitability AND risk gates to be recommended.

# Profitability Calculator Settings (4-Gate System)
# Gate 1: APY Improvement - Target APY must exceed current by this amount
MIN_APY_IMPROVEMENT=0.5  # Minimum APY improvement required (0.5% default)

# Gate 2: Net Annual Gain - Must generate minimum annual profit after costs
MIN_ANNUAL_GAIN_USD=10  # Minimum annual profit required ($10/year default)

# Gate 3: Break-Even Period - Must recover costs within this timeframe
MAX_BREAK_EVEN_DAYS=30  # Maximum days to recover costs (30 days default)

# Gate 4: Cost Ratio - Total costs must be below this percentage of position
MAX_REBALANCE_COST_PCT=1.0  # Maximum costs as % of position (1.0% default)

# Strategy Settings
MIN_REBALANCE_AMOUNT=100  # Minimum position size to rebalance ($100 default)

# Risk Assessment Settings (7-Factor System)
MAX_CONCENTRATION_PCT=50  # Maximum % in single protocol (50% default)
LARGE_POSITION_THRESHOLD=10000  # Threshold for large position risk ($10k default)
RISK_TOLERANCE=medium  # Risk tolerance: low/medium/high
ALLOW_HIGH_RISK_MOVES=false  # Allow HIGH risk moves (requires elevated approval)
DIVERSIFICATION_TARGET=3  # Target number of protocols for diversification

# Strategy Selection
# DEFAULT_STRATEGY=simple  # Options: "simple" (aggressive) or "risk_adjusted" (conservative)

# ============================================================================
# PHASE 4 SPRINT 3: Protocol Scanning Performance Optimization
# ============================================================================
# These settings optimize protocol scanning for faster execution and reduced RPC load.

# Protocol Market/Pool Limits (reduces scan time by limiting scope)
MORPHO_MAX_MARKETS=20  # Maximum Morpho markets to scan (default: 20, max: 100)
AERODROME_MAX_POOLS=10  # Maximum Aerodrome pools to scan (default: 10, max: 50)

# Supported Tokens (comma-separated list of tokens with Chainlink feeds)
# Filters markets/pools to only those with supported assets, preventing failed price lookups
SUPPORTED_TOKENS=ETH,WETH,USDC,USDT,DAI,BTC,WBTC
